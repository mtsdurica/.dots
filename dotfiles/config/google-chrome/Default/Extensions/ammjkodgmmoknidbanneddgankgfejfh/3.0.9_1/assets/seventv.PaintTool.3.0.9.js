import{e as T,l as i,f as u,y as E,z as G,j as t,_ as b,aS as J,W as oe,A as L,F as A,m as M,B as c,aE as $,s as P,u as C,k as w,aK as Y,aJ as ue,aF as ae,K as pe,aD as ce,w as ne,J as ve,a as le,aA as _e,a4 as me,q as x,x as N,R as B,at as fe,aL as he,au as q}from"./seventv.index.3.0.9.js";import{a as F,D as ye,H as K,c as ge,S as we,b as $e,d as X,g as se,u as Q}from"./seventv.useCosmetics.3.0.9.js";import{u as ke}from"./seventv.main.3.0.9.js";import{C as z}from"./seventv.CloseIcon.3.0.9.js";import{C as Z}from"./seventv.ChevronIcon.3.0.9.js";import{v as j}from"./seventv.v4.3.0.9.js";import{r as k,u as U,t as R,b as S,L as Ie,a as H,n as Ce}from"./seventv.useUserAgent.3.0.9.js";import{U as D}from"./seventv.UiButton.3.0.9.js";import{U as ie}from"./seventv.StarIcon.3.0.9.js";import{U as ee}from"./seventv.UiFloating.3.0.9.js";import"./seventv.ChatMessage.3.0.9.js";import"./seventv.index.3.0.93.js";const be=d=>(E("data-v-edf274bd"),d=d(),G(),d),xe=["direction"],Ae=be(()=>t("path",{d:"M214.6 454.6L192 477.3l-22.6-22.6-144-144L2.7 288 48 242.8l22.6 22.6L160 354.8 160 64l0-32 64 0 0 32 0 290.7 89.4-89.4L336 242.8 381.3 288l-22.6 22.6-144 144z"},null,-1)),Te=[Ae],Pe=T({__name:"ArrowIcon",props:{direction:{}},setup(d){return(v,f)=>(i(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",direction:v.direction||"down",width:"1em",height:"1em",fill:"currentColor"},Te,8,xe))}});const Ue=b(Pe,[["__scopeId","data-v-edf274bd"]]),Ve={},Se={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentcolor"},Re=t("path",{d:"M256 80V48H192V80 224H48 16v64H48 192V432v32h64V432 288H400h32V224H400 256V80z"},null,-1),Ne=[Re];function Le(d,v){return i(),u("svg",Se,Ne)}const re=b(Ve,[["render",Le]]),De=["onUpdate:modelValue"],Ee=["onUpdate:modelValue","onInput"],Ge=["value","onInput"],Me={for:"move"},ze={for:"n"},He=T({__name:"PaintToolGradientStop",props:{modelValue:{}},emits:["update:modelValue"],setup(d,{emit:v}){const f=d,e=k([]),h=k(1);function m(){const n=e.value.length?structuredClone(Ie(e.value[e.value.length-1])):{id:j(),at:0,color:0,alpha:1};e.value.push(n)}function l(n,o){n.target instanceof HTMLInputElement&&(o.color=K(n.target.value,h.value))}function a(n,o){if(!(n.target instanceof HTMLInputElement))return;const p=n.target.valueAsNumber*255;o.color=o.color&4294967040|p&255}return J(e.value,n=>{v("update:modelValue",n.map(o=>({at:o.at,color:o.color})))},{throttle:50}),oe(()=>{for(const n of f.modelValue??[])e.value.push({id:j(),at:n.at,color:n.color,alpha:(n.color&255)/255})}),(n,o)=>{const p=L("tooltip");return i(),u(A,null,[(i(!0),u(A,null,M(e.value,(_,s)=>(i(),u("div",{key:_.id,class:"seventv-paint-tool-gradient-stop"},[c(t("input",{"onUpdate:modelValue":r=>e.value[s].at=r,type:"number",for:"at",step:"0.01"},null,8,De),[[$,e.value[s].at,void 0,{number:!0}],[p,"Position"]]),c(t("input",{"onUpdate:modelValue":r=>e.value[s].alpha=r,type:"number",for:"alpha",step:"0.025",min:"0",max:"1",onInput:r=>a(r,e.value[s])},null,40,Ee),[[$,e.value[s].alpha],[p,"Alpha"]]),c(t("input",{type:"color",for:"color",value:U(F)(e.value[s].color,!1),onInput:r=>l(r,e.value[s])},null,40,Ge),[[p,"Color"]]),t("div",Me,[e.value[s-1]?c((i(),P(Z,{key:0,direction:"left",onClick:r=>e.value.splice(s-1,0,e.value.splice(s,1)[0])},null,8,["onClick"])),[[p,"<- #"+(s-1)]]):C("",!0),e.value[s+1]?c((i(),P(Z,{key:1,direction:"right",onClick:r=>e.value.splice(s+1,0,e.value.splice(s,1)[0])},null,8,["onClick"])),[[p,"-> #"+(s+1)]]):C("",!0),c(w(z,{for:"close",onClick:r=>e.value.splice(s,1)},null,8,["onClick"]),[[p,"Delete Stop #"+s]])]),t("p",ze,"#"+R(s),1),e.value[s].alpha<1?(i(),u("div",{key:0,class:"seventv-paint-tool-gradient-color-preview",style:S({backgroundColor:U(ye)(e.value[s].color)})},null,4)):C("",!0)]))),128)),t("button",{class:"seventv-paint-tool-gradient-stop-add",onClick:m},[w(re)])],64)}}});const Oe=b(He,[["__scopeId","data-v-bc63d0a5"]]),V=d=>(E("data-v-a4743293"),d=d(),G(),d),Be={class:"seventv-paint-tool-gradient-stop-metadata"},je=V(()=>t("option",{value:"LINEAR_GRADIENT"},"Linear Gradient",-1)),Je=V(()=>t("option",{value:"RADIAL_GRADIENT"},"Radial Gradient",-1)),Fe=V(()=>t("option",{value:"CONIC_GRADIENT"},"Conic Gradient",-1)),Ke=V(()=>t("option",{value:"URL"},"Image URL",-1)),We=[je,Je,Fe,Ke],Ye=pe('<option value="no-repeat" data-v-a4743293>No Repeat</option><option value="repeat" data-v-a4743293>Repeat All</option><option value="repeat-x" data-v-a4743293>Repeat Horizontally</option><option value="repeat-y" data-v-a4743293>Repeat Vertically</option><option value="round" data-v-a4743293>Round</option><option value="space" data-v-a4743293>Space</option>',6),qe=[Ye],Xe={for:"control"},Qe={key:3,for:"pos"},Ze=V(()=>t("label",null,"Position",-1)),et={key:4,for:"scale"},tt=V(()=>t("label",null,"Scale",-1)),ot={for:"stop-repeat"},at=V(()=>t("label",null,"Repeat Stops",-1)),nt={key:0,class:"seventv-paint-tool-gradient-stop-list"},lt=T({__name:"PaintToolGradient",props:{id:{},data:{}},emits:["update","delete"],setup(d,{emit:v}){const e=H(d.data??{function:"LINEAR_GRADIENT",canvas_repeat:"no-repeat",size:[1,1],at:[0,0],repeat:!1,stops:[],angle:90,image_url:"",shape:"circle"}),h=k(""),m=k("");return J(e,l=>{[h.value,m.value]=ge(l),v("update",l)},{throttle:50}),oe(()=>{Array.isArray(e.at)||(e.at=[0,0]),Array.isArray(e.size)||(e.size=[1,1]),Array.isArray(e.stops)||(e.stops=[]),v("update",e)}),(l,a)=>{const n=L("tooltip");return i(),u("div",{class:"seventv-paint-tool-gradient",onWheel:a[12]||(a[12]=ae(()=>{},["stop"]))},[t("div",Be,[c((i(),u("select",{"onUpdate:modelValue":a[0]||(a[0]=o=>e.function=o),for:"function"},We)),[[Y,e.function],[n,"Generator"]]),c((i(),u("select",{"onUpdate:modelValue":a[1]||(a[1]=o=>e.canvas_repeat=o),for:"repeat-mode"},qe)),[[Y,e.canvas_repeat],[n,"Canvas Repeat Mode"]]),e.function==="LINEAR_GRADIENT"?c((i(),u("input",{key:0,"onUpdate:modelValue":a[2]||(a[2]=o=>e.angle=o),for:"arg1",type:"number"},null,512)),[[$,e.angle,void 0,{number:!0}],[n,"Angle"]]):e.function==="RADIAL_GRADIENT"?c((i(),u("input",{key:1,"onUpdate:modelValue":a[3]||(a[3]=o=>e.shape=o),type:"text"},null,512)),[[$,e.shape],[n,"Shape"]]):e.function==="URL"?c((i(),u("input",{key:2,"onUpdate:modelValue":a[4]||(a[4]=o=>e.image_url=o),type:"text"},null,512)),[[$,e.image_url],[n,"Image URL"]]):C("",!0),t("div",Xe,[t("p",null,"Gradient #"+R(l.id),1),w(z,{onClick:a[5]||(a[5]=o=>v("delete"))})]),e.at?(i(),u("div",Qe,[Ze,c(t("input",{"onUpdate:modelValue":a[6]||(a[6]=o=>e.at[0]=o),type:"number",step:"0.01"},null,512),[[$,e.at[0],void 0,{number:!0}],[n,"X Position"]]),c(t("input",{"onUpdate:modelValue":a[7]||(a[7]=o=>e.at[1]=o),type:"number",step:"0.01"},null,512),[[$,e.at[1],void 0,{number:!0}],[n,"Y Position"]])])):C("",!0),e.size?(i(),u("div",et,[tt,c(t("input",{"onUpdate:modelValue":a[8]||(a[8]=o=>e.size[0]=o),type:"number",step:"0.01",min:"0"},null,512),[[$,e.size[0],void 0,{number:!0}],[n,"Width"]]),c(t("input",{"onUpdate:modelValue":a[9]||(a[9]=o=>e.size[1]=o),type:"number",step:"0.01",min:"0"},null,512),[[$,e.size[1],void 0,{number:!0}],[n,"Height"]])])):C("",!0),t("div",ot,[at,c(t("input",{"onUpdate:modelValue":a[10]||(a[10]=o=>e.repeat=o),type:"checkbox"},null,512),[[ue,e.repeat]])])]),e.function!=="URL"?(i(),u("div",nt,[w(Oe,{modelValue:e.stops,"onUpdate:modelValue":a[11]||(a[11]=o=>e.stops=o),modelModifiers:{lazy:!0}},null,8,["modelValue"])])):C("",!0),t("div",{class:"seventv-paint-tool-gradient-outline",style:S({backgroundImage:h.value})},null,4)],32)}}});const st=b(lt,[["__scopeId","data-v-a4743293"]]),it=T({__name:"PaintToolList",props:{componentType:{},gridArea:{},color:{},data:{}},emits:["update"],setup(d,{emit:v}){var o;const f=d;ce(p=>({"628d3ee5":p.color,f6d3ed0e:l.value}));const e=k(((o=f.data)==null?void 0:o.map((p,_)=>({index:_,data:p})))??[]),h=k(""),m=k(""),l=k("");function a(){e.value.push({index:e.value.length,data:null})}ne(()=>{h.value=f.gridArea+"-mod",m.value=f.gridArea,l.value=f.color+we(.075)});function n(){v("update",e.value.map(p=>p.data))}return(p,_)=>(i(),u(A,null,[t("button",{class:"paint-tool-list-mod",style:S({gridArea:h.value}),onClick:a},[w(re)],4),t("div",{class:"paint-tool-list",style:S({gridArea:m.value})},[t("p",null,R(p.gridArea.toUpperCase()),1),t("div",null,[(i(!0),u(A,null,M(e.value,s=>(i(),P(ve(f.componentType),{id:s.index,key:s.index,data:s.data,onDelete:r=>e.value.splice(e.value.indexOf(s),1),onUpdate:r=>[s.data=r,n()]},null,40,["id","data","onDelete","onUpdate"]))),128))])],4)],64))}});const te=b(it,[["__scopeId","data-v-b2169bf0"]]),rt={for:"offset"},dt={for:"radius"},ut={for:"alpha"},pt={for:"color"},ct=["value"],vt=T({__name:"PaintToolShadow",props:{id:{},data:{}},emits:["update","delete"],setup(d,{emit:v}){const e=H(d.data??{x_offset:0,y_offset:0,radius:1,color:255}),h=k(1),m=k("");function l(n){n.target instanceof HTMLInputElement&&(e.color=K(n.target.value,h.value))}function a(n){if(!(n.target instanceof HTMLInputElement))return;const o=n.target.valueAsNumber*255;e.color=e.color&4294967040|o&255}return le(e,n=>{v("update",n),m.value=$e(n)}),(n,o)=>{const p=L("tooltip");return i(),u("div",{class:"seventv-paint-tool-shadow",onWheel:o[7]||(o[7]=ae(()=>{},["stop"]))},[t("div",{for:"preview",style:S({filter:m.value})},[w(z,{onClick:o[0]||(o[0]=_=>v("delete"))}),t("span",null,"Shadow #"+R(n.id),1)],4),t("div",rt,[c(t("input",{"onUpdate:modelValue":o[1]||(o[1]=_=>e.x_offset=_),type:"number",step:"0.05"},null,512),[[$,e.x_offset],[p,"X Offset"]]),c(t("input",{"onUpdate:modelValue":o[2]||(o[2]=_=>e.y_offset=_),type:"number",step:"0.05"},null,512),[[$,e.y_offset],[p,"Y Offset"]])]),t("div",dt,[c(t("input",{"onUpdate:modelValue":o[3]||(o[3]=_=>e.radius=_),type:"number",step:"0.05",min:"0"},null,512),[[$,e.radius],[p,"Radius"]])]),t("div",ut,[c(t("input",{"onUpdate:modelValue":o[4]||(o[4]=_=>h.value=_),type:"number",min:"0",max:"1",step:"0.025",onInput:o[5]||(o[5]=_=>a(_))},null,544),[[$,h.value],[p,"Alpha"]])]),t("div",pt,[c(t("input",{type:"color",value:U(F)(e.color,!1),onInput:o[6]||(o[6]=_=>l(_))},null,40,ct),[[p,"color"]])])],32)}}});const _t=b(vt,[["__scopeId","data-v-603c8373"]]),O=d=>(E("data-v-090a02c7"),d=d(),G(),d),mt={class:"seventv-paint-tool"},ft={class:"seventv-paint-tool-title"},ht=["data-seventv-paint-id"],yt={class:"seventv-paint-tool-preview"},gt=["data-seventv-paint-id"],wt={class:"seventv-paint-tool-content"},$t={for:"paint"},kt={for:"color"},It=["value"],Ct=O(()=>t("div",{class:"text-mod"},null,-1)),bt=O(()=>t("div",{class:"text"},null,-1)),xt=O(()=>t("div",{class:"flair-add"},null,-1)),At=O(()=>t("div",{class:"flairs"},null,-1)),Tt=T({__name:"PaintToolMaker",props:{id:{}},emits:["exit","save"],setup(d,{emit:v}){const f=d,{cosmetics:e}=se(),{identity:h}=_e(ke()),m=e[f.id??""],l=k(m?m.id:j()),a=H((m==null?void 0:m.data)??{name:"Untitled Paint",color:2139062271,gradients:[],shadows:[]});function n(){return{id:l.value,kind:"PAINT",provider:"7TV",data:a}}function o(){if(!h.value)return;const s=Q(h.value.id).paints;s.clear(),s.set(l.value,n())}function p(){if(!h.value)return;Q(h.value.id).paints.delete(l.value),B.cosmetics.delete(l.value).then(()=>v("exit"))}function _(){if(!h.value)return;const s=JSON.stringify(n());navigator.clipboard.writeText(s)}return J(a,()=>X(n()),{throttle:50,immediate:!0}),me(()=>X(n(),!0)),(s,r)=>{const g=L("tooltip");return i(),u("main",mt,[t("div",ft,[w(Ue,{for:"exit-icon",direction:"left",onClick:r[0]||(r[0]=y=>[v("exit"),v("save",n())])}),c(t("input",{"onUpdate:modelValue":r[1]||(r[1]=y=>a.name=y)},null,512),[[$,a.name]]),t("div",{class:Ce(["seventv-paint-tool-preview seventv-paint full-preview",{"is-empty":!a.gradients.length}]),"data-seventv-paint-id":l.value},null,10,ht),t("div",yt,[(i(!0),u(A,null,M(Array(3).fill({}),(y,I)=>(i(),u("span",{key:I,style:S({fontSize:`calc(1rem * ${I+1})`}),class:"seventv-paint seventv-painted-content","data-seventv-paint-id":l.value,"data-seventv-painted-text":!0}," Preview ",12,gt))),128))])]),w(ie,null,{default:x(()=>[t("div",wt,[t("div",$t,[w(D,{onClick:o},{default:x(()=>[N("TRY ON")]),_:1}),w(D,{onClick:_},{default:x(()=>[N("SHARE")]),_:1}),w(D,{onClick:p},{default:x(()=>[N("DELETE")]),_:1}),t("div",kt,[c(w(z,{onClick:r[2]||(r[2]=y=>a.color=null)},null,512),[[g,"Unset Override Color"]]),c(t("input",{type:"color",value:a.color?U(F)(a.color):null,onInput:r[3]||(r[3]=y=>a.color=U(K)(y.target.value))},null,40,It),[[g,"Override Color"]])])]),w(te,{color:"#f542c2","component-type":st,"grid-area":"gradients",data:a.gradients,onUpdate:r[4]||(r[4]=y=>a.gradients=y)},null,8,["data"]),w(te,{color:"#f5e6ce","component-type":_t,"grid-area":"shadows",data:a.shadows,onUpdate:r[5]||(r[5]=y=>a.shadows=y)},null,8,["data"]),Ct,bt,xt,At])]),_:1})])}}});const Pt=b(Tt,[["__scopeId","data-v-090a02c7"]]),Ut={class:"paint-tool-paint-card"},Vt={for:"name"},St={for:"colorball"},Rt=["data-seventv-paint-id"],Nt=T({__name:"PaintToolPaintCard",props:{paint:{}},setup(d){return(v,f)=>{const e=L("cosmetic-paint");return i(),u("div",Ut,[t("div",Vt,[c((i(),u("span",null,[N(R(v.paint.data.name),1)])),[[e,v.paint.id]])]),t("div",St,[t("div",{class:"seventv-paint","data-seventv-paint-id":v.paint.id},null,8,Rt)])])}}});const Lt=b(Nt,[["__scopeId","data-v-4eeea0d6"]]),de=d=>(E("data-v-ac56dc94"),d=d(),G(),d),Dt={key:0,class:"paint-tool-home"},Et={for:"heading"},Gt=de(()=>t("h3",null,"Paint Tool",-1)),Mt=de(()=>t("sub",null,"Select Project",-1)),zt={class:"paint-tool-projects"},Ht=["onKeydown"],Ot=T({__name:"PaintTool",setup(d){const{cosmetics:v}=se(),f=k("preview"),e=k(null),h=k([]),m=k(null),l=H({prompt:!1,value:"",error:fe("",2500)});function a(g){f.value="maker",e.value=g.id}function n(){f.value="preview",e.value=null}async function o(g){v[g.id]=g;const y=B.cosmetics.put(JSON.parse(JSON.stringify(g)));return y.then(r),y}function p(){f.value="maker",e.value=null}async function _(){l.error="";const g=l.prompt,y=g?l.value:await navigator.clipboard.readText().catch(()=>"");l.value="",l.prompt=!1,y||(l.prompt=!0);let I;try{I=JSON.parse(y)}catch(W){l.prompt=!g,l.error="Invalid JSON: "+W.message;return}if(!s(I)){l.prompt=!0,l.error="Invalid Paint Data";return}await o(I),l.prompt=!1}function s(g){return!(!g.id||typeof g.data!="object"||typeof g.data.name!="string")}function r(){B.cosmetics.where("kind").equals("PAINT").toArray().then(g=>{h.value=g})}return ne(r),le(f,r),(g,y)=>(i(),u(A,null,[f.value==="preview"?(i(),u("main",Dt,[t("div",Et,[Gt,t("div",{ref_key:"shareButton",ref:m},[w(D,{onClick:_},{default:x(()=>[N("IMPORT...")]),_:1})],512),Mt]),w(ie,null,{default:x(()=>[t("div",zt,[(i(!0),u(A,null,M(h.value,I=>(i(),P(Lt,{key:I.id,paint:I,onClick:W=>a(I)},null,8,["paint","onClick"]))),128)),t("div",{class:"paint-tool-new-project-button",onClick:p},"New Project")])]),_:1})])):C("",!0),m.value?(i(),u(A,{key:1},[l.prompt&&m.value?(i(),P(ee,{key:0,anchor:m.value,placement:"bottom",middleware:[U(q)(4)]},{default:x(()=>[c(t("input",{"onUpdate:modelValue":y[0]||(y[0]=I=>l.value=I),placeholder:"Import Code",autofocus:!0,onKeydown:he(_,["enter"])},null,40,Ht),[[$,l.value]])]),_:1},8,["anchor","middleware"])):C("",!0),l.error?(i(),P(ee,{key:1,anchor:m.value,placement:"left",middleware:[U(q)(8)]},{default:x(()=>[t("p",null,R(l.error),1)]),_:1},8,["anchor","middleware"])):C("",!0)],64)):f.value==="maker"?(i(),P(Pt,{key:2,id:e.value,onExit:n,onSave:o},null,8,["id"])):C("",!0)],64))}});const to=b(Ot,[["__scopeId","data-v-ac56dc94"]]);export{to as default};
