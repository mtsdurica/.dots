import{_ as b,l as o,f as r,j as c,e as x,F as y,m as S,s as k,ay as ee,u as L,G as B,d as se,aG as te,k as C,J as N,q as j,y as F,z as Y,ai as oe,aH as ne,aj as U,L as ae}from"./seventv.index.3.0.9.js";import{d as ce,g as V}from"./seventv.useModule.3.0.9.js";import{u as O}from"./seventv.useChannelContext.3.0.9.js";import{u as G}from"./seventv.UiConfirmPrompt.3.0.9.js";import{T as re,U as ie}from"./seventv.UiDraggable.3.0.9.js";import{u as P}from"./seventv.useChatEmotes.3.0.9.js";import{a as q,u as g,r as D,t as W,m as I}from"./seventv.useUserAgent.3.0.9.js";import{U as J,r as le,h as de,c as T,g as H,i as ue,j as _e}from"./seventv.UserTag.3.0.9.js";import{c as me,b as fe,a as ve}from"./seventv.index.3.0.95.js";import{U as he}from"./seventv.StarIcon.3.0.9.js";const ge={},pe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},Me=c("path",{d:"M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256z"},null,-1),be=[Me];function we(s,n){return o(),r("svg",pe,be)}const ye=b(ge,[["render",we]]),ke={},$e={width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",fill:"currentColor"},Ce=c("path",{d:"M344 56L320 80c37.3 37.3 74.7 74.7 112 112c8-8 16-16 24-24l24.7 24.7c-75.6 6.5-137.5 60.8-155.4 132.6c-4.4-4.4-8.8-8.8-13.2-13.2c8-8 16-16 24-24c-37.3-37.3-74.7-74.7-112-112l-24 24c-18.7-18.7-37.3-37.3-56-56C192 96 240 48 288 0c18.7 18.7 37.3 37.3 56 56zM214.6 342.7c5.8 5.7 11.6 11.5 17.4 17.3C181.3 410.7 130.7 461.3 80 512c-26.7-26.7-53.3-53.3-80-80c50.7-50.7 101.3-101.3 152-152c5.8 5.8 11.6 11.6 17.4 17.4c21.8-21.8 43.5-43.6 65.3-65.4c15.1 15.1 30.2 30.2 45.3 45.3c-21.8 21.8-43.6 43.6-65.4 65.4zM352 368c0-79.5 64.5-144 144-144s144 64.5 144 144s-64.5 144-144 144s-144-64.5-144-144zm160-80l-32 0c0 32 0 64 0 96c26.7 0 53.3 0 80 0c0-10.7 0-21.3 0-32c-16 0-32 0-48 0c0-21.3 0-42.7 0-64z"},null,-1),Le=[Ce];function xe(s,n){return o(),r("svg",$e,Le)}const K=b(ke,[["render",xe]]),Ie={},De={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},Se=c("path",{d:"M400 16L166.6 249.4l96 96L496 112 512 0 400 16zM0 416l96 96 32-32-16-32 56-56 88 56 32-32L96 224 64 256l56 88L64 400 32 384 0 416z"},null,-1),Te=[Se];function Ae(s,n){return o(),r("svg",De,Te)}const ze=b(Ie,[["render",Ae]]),Ne={},Ee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},Be=c("path",{d:"M256 0H224V32 96v32h64V96 66.7C378.8 81.9 448 160.9 448 256c0 106-86 192-192 192S64 362 64 256c0-53.7 22-102.3 57.6-137.1l22.9-22.4L99.7 50.7 76.8 73.1C29.5 119.6 0 184.4 0 256C0 397.4 114.6 512 256 512s256-114.6 256-256S397.4 0 256 0zM193 159l-17-17L142.1 176l17 17 80 80 17 17L289.9 256l-17-17-80-80z"},null,-1),Oe=[Be];function Re(s,n){return o(),r("svg",Ee,Oe)}const Ue=b(Ne,[["render",Re]]),Ve={},He={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",width:"1em",height:"1em"},Xe=c("path",{d:"M448 32H0V480H448V32zM248 128v24V264v24H200V264 152 128h48zM200 320h48v48H200V320z"},null,-1),je=[Xe];function Fe(s,n){return o(),r("svg",He,je)}const Ye=b(Ve,[["render",Fe]]),Ge=q({modMessages:[]});function Q(){return Ge}const Pe={class:"seventv-mod-log-authority-messages"},qe=x({__name:"ModLogsAuthorityMessages",setup(s){const n=Q(),t=O(),d=P(t);return(l,f)=>(o(),r("main",Pe,[(o(!0),r(y,null,S(g(n).modMessages,e=>(o(),k(J,{key:e.id,msg:e,"force-timestamp":!0,emotes:g(d).active},null,8,["msg","emotes"]))),128))]))}});const We=b(qe,[["__scopeId","data-v-0fb8fc84"]]);function Z(s,n){if(s==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t]);return s}function Je(s){return Z({},s)}var X=1440,Ke=2520,E=43200,Qe=86400;function Ze(s,n,t){var d,l;le(2,arguments);var f=ue(),e=(d=(l=t==null?void 0:t.locale)!==null&&l!==void 0?l:f.locale)!==null&&d!==void 0?d:de;if(!e.formatDistance)throw new RangeError("locale must contain formatDistance property");var v=me(s,n);if(isNaN(v))throw new RangeError("Invalid time value");var a=Z(Je(t),{addSuffix:!!(t!=null&&t.addSuffix),comparison:v}),m,p;v>0?(m=T(n),p=T(s)):(m=T(s),p=T(n));var _=fe(p,m),$=(H(p)-H(m))/1e3,i=Math.round((_-$)/60),u;if(i<2)return t!=null&&t.includeSeconds?_<5?e.formatDistance("lessThanXSeconds",5,a):_<10?e.formatDistance("lessThanXSeconds",10,a):_<20?e.formatDistance("lessThanXSeconds",20,a):_<40?e.formatDistance("halfAMinute",0,a):_<60?e.formatDistance("lessThanXMinutes",1,a):e.formatDistance("xMinutes",1,a):i===0?e.formatDistance("lessThanXMinutes",1,a):e.formatDistance("xMinutes",i,a);if(i<45)return e.formatDistance("xMinutes",i,a);if(i<90)return e.formatDistance("aboutXHours",1,a);if(i<X){var M=Math.round(i/60);return e.formatDistance("aboutXHours",M,a)}else{if(i<Ke)return e.formatDistance("xDays",1,a);if(i<E){var h=Math.round(i/X);return e.formatDistance("xDays",h,a)}else if(i<Qe)return u=Math.round(i/E),e.formatDistance("aboutXMonths",u,a)}if(u=ve(p,m),u<12){var w=Math.round(i/E);return e.formatDistance("xMonths",w,a)}else{var R=u%12,z=Math.floor(u/12);return R<3?e.formatDistance("aboutXYears",z,a):R<9?e.formatDistance("overXYears",z,a):e.formatDistance("almostXYears",z+1,a)}}const es=["data-seventv-mod-action"],ss={class:"mod-action-timestamp"},ts={key:0,class:"mod-action-message-list"},os={key:1,class:"no-messages-recorded"},ns=x({__name:"ModLogsRecentActionsItem",props:{messages:{},victim:{},mod:{},emotes:{}},setup(s){const n=s,t=D("");ee(()=>{t.value=Ze(new Date(n.mod.timestamp),new Date,{addSuffix:!0,includeSeconds:!0})},5e3,{immediateCallback:!0});function d(){return n.mod.actionType+(n.mod.banDuration?" "+n.mod.banDuration+"s":"")}return(l,f)=>(o(),r("div",{class:"mod-action","data-seventv-mod-action":d()},[c("span",null,[l.victim?(o(),k(_e,{key:0,user:l.victim},null,8,["user"])):L("",!0),c("span",ss,W(t.value),1)]),l.messages.length?(o(),r("div",ts,[(o(!0),r(y,null,S(l.messages,e=>(o(),k(J,{key:e.id,msg:e,emotes:l.emotes,"hide-author":!0,"hide-deletion-state":!0,"hide-moderation":!0},null,8,["msg","emotes"]))),128))])):(o(),r("p",os,"(No Messages Recorded)"))],8,es))}});const as=b(ns,[["__scopeId","data-v-3a2aecb4"]]),cs={class:"seventv-mod-log-recent-actions"},rs=x({__name:"ModLogsRecentActions",setup(s){const n=O(),t=G(n),d=P(n);return(l,f)=>(o(),r("main",cs,[(o(!0),r(y,null,S(g(t).moderated,e=>(o(),r(y,{key:e.id},[e.mod?(o(),k(as,{key:0,messages:e.messages,victim:e.victim,mod:e.mod,emotes:g(d).active},null,8,["messages","victim","mod","emotes"])):L("",!0)],64))),128))]))}});const is=b(rs,[["__scopeId","data-v-98a53b9a"]]),A=s=>(F("data-v-9f7506be"),s=s(),Y(),s),ls={class:"seventv-mod-logs-container"},ds=A(()=>c("h3",{style:{"font-size":"1.5rem"}},"Mod Logs",-1)),us={class:"seventv-mod-logs-content"},_s={class:"seventv-mod-logs-sidebar"},ms=["selected","unavailable","onClick"],fs={class:"seventv-mod-logs-body"},vs={key:0,class:"seventv-mod-logs-risks"},hs={class:"seventv-mod-logs-risks-heads-up"},gs=A(()=>c("span",null,"HEADS UP!",-1)),ps=A(()=>c("span",null," The content displayed by this tool is unfiltered and contains potentially harmful or offensive material that has been blocked by the channel moderators. Are you sure you want to proceed? ",-1)),Ms={class:"seventv-mod-logs-risks-choice"},bs=A(()=>c("label",null,"(You can re-enable this feature via the settings later)",-1)),ws=x({__name:"ModLogs",props:{channelId:{}},emits:["close"],setup(s,{expose:n,emit:t}){const l=O(s.channelId),f=G(l),e=Q(),v=D(),a=B("chat.mod_logs.enabled"),m=B("chat.mod_logs.ack_risks"),p=D("recent-actions"),_=se(()=>$[p.value]??null),$=q({"recent-actions":{id:"recent-actions",name:"Recent Timeouts/Bans",icon:I(ye),com:I(is)},"active-actions":{id:"active-actions",name:"Active Timeouts/Bans",icon:I(Ue),com:void 0},"moderator-messages":{id:"moderator-messages",name:"Moderator Messages",icon:I(ze),com:I(We)}});function i(u){m.value=u,a.value=u,u||t("close")}return te(f.displayed,(u,M,h)=>{for(const w of h)("moderator"in w.badges||"broadcaster"in w.badges||"staff"in w.badges)&&e.modMessages.unshift(w);e.modMessages.length>200&&(e.modMessages.length=150)}),n({handle:v}),(u,M)=>(o(),r("main",ls,[c("div",{ref_key:"handle",ref:v,class:"seventv-mod-logs-header"},[C(K),ds,c("button",{onClick:M[0]||(M[0]=h=>t("close"))},[C(re)])],512),c("div",us,[c("div",_s,[(o(!0),r(y,null,S($,(h,w)=>(o(),r(y,{key:w},[h.com?(o(),r("div",{key:0,class:"seventv-mod-logs-sidebar-button",selected:h.id===p.value,unavailable:!g(m),onClick:()=>p.value=h.id},[(o(),k(N(h.icon)))],8,ms)):L("",!0)],64))),128))]),C(he,null,{default:j(()=>[c("div",fs,[g(m)?_.value?(o(),r(y,{key:1},[c("p",null,[(o(),k(N(_.value.icon))),c("span",null,W(_.value.name),1)]),(o(),k(N(_.value.com)))],64)):L("",!0):(o(),r("div",vs,[c("p",hs,[C(Ye),gs]),ps,c("div",Ms,[c("button",{class:"decide-ack",onClick:M[1]||(M[1]=h=>i(!0))}," Acknowledge and Proceed "),c("button",{class:"decide-close",onClick:M[2]||(M[2]=h=>i(!1))},"Close"),bs])]))])]),_:1})])]))}});const ys=b(ws,[["__scopeId","data-v-9f7506be"]]),ks=s=>(F("data-v-32c0d32c"),s=s(),Y(),s),$s=ks(()=>c("span",{class:"tooltip-over"},"Mod Logs",-1)),Cs=x({__name:"ModLogsButton",props:{onClick:{type:Function}},setup(s){const n=B("chat.mod_logs.enabled");return(t,d)=>g(n)?(o(),r("div",{key:0,class:"seventv-tw-button seventv-mod-logs-button",onClick:d[0]||(d[0]=(...l)=>t.onClick&&t.onClick(...l))},[c("button",null,[C(K,{class:"icon"})]),$s])):L("",!0)}});const Ls=b(Cs,[["__scopeId","data-v-32c0d32c"]]),xs=[U("chat.mod_logs.enabled","TOGGLE",{path:["Chat","Moderation"],label:"Enable Mod Logs",hint:"Mod Logs allow you to view recent and active timeouts/bans in the current channel",defaultValue:!0}),U("chat.mod_logs.ack_risks","NONE",{label:"",defaultValue:!1})],Is=x({__name:"ModLogsModule",async setup(s){let n,t;const{dependenciesMet:d,markAsReady:l}=ce("mod-logs",{name:"Mod Logs",depends_on:["chat","chat-input-controller"]}),f=D(!1),e=D();[n,t]=oe(()=>ae(d).toBe(!0)),await n,t();const v=V("chat-input-controller");if(!(v!=null&&v.instance))throw new Error("ChatInputController not found");const a=V("chat");if(!(a!=null&&a.instance))throw new Error("ChatController not found");const m=v.instance.addButton("mod-logs",Ls,{onClick:()=>{f.value=!f.value}},2);return l(),(p,_)=>{var $;return f.value&&g(m).current?(o(!0),r(y,{key:0},S((($=g(a).instance)==null?void 0:$.chatController.instances)??[],i=>{var u;return o(),k(ie,{key:i.component.props.channelID,handle:(u=e.value)==null?void 0:u.handle,"initial-anchor":g(m).current,"initial-middleware":[g(ne)({padding:{bottom:96,right:8},crossAxis:!0})]},{default:j(()=>[C(ys,{ref_for:!0,ref_key:"com",ref:e,"channel-id":i.component.props.channelID,onClose:_[0]||(_[0]=M=>f.value=!1)},null,8,["channel-id"])]),_:2},1032,["handle","initial-anchor","initial-middleware"])}),128)):L("",!0)}}}),Us=Object.freeze(Object.defineProperty({__proto__:null,config:xs,default:Is},Symbol.toStringTag,{value:"Module"}));export{Us as _};
